# A股量化回测框架配置文件

# 数据配置
data:
  # 数据路径
  base_path: "data/stock/kline/day"  # 日线数据目录
  stock_list_path: "data/stock/list"  # 股票列表目录

  # 数据格式
  date_format: "%Y-%m-%d"
  encoding: "utf-8"

  # 数据筛选
  min_data_points: 100  # 最少数据点数

  # 数据加载时间范围（应该包含回测时间范围）
  # 注意：加载范围应该比回测范围更早，以确保策略有足够的历史数据
  load_start_date: "2019-01-01"   # 数据开始日期
  load_end_date: "2020-12-31"     # 数据结束日期

  # 股票白名单（可选，为null则加载所有股票）
  stock_whitelist: ['000001']  # 只加载这些股票的数据

# 回测配置
backtest:
  # 时间范围
  start_date: "2020-01-01"
  end_date: "2020-04-30"

  # 初始资金
  initial_capital: 1000000  # 100万

  # 基准
  benchmark: "000001"  # 上证指数

  # 回测详细输出
  verbose: true

# 策略配置
strategy:
  # 策略类名（使用完整的类名）
  type: "SimpleMAStrategy"

  # 策略参数
  params:
    # SimpleMAStrategy 参数
    window: 10           # 均线周期
    max_position: 1      # 最大持仓数
    min_bars: 10         # 最少历史bar数

  # 策略股票列表（可选，为null则使用所有加载的股票）
  stock_list: ['000001']

# 交易成本配置（A股标准）
transaction_cost:
  # 佣金率（万三）
  commission_rate: 0.0003

  # 印花税率（仅卖出，千分之一）
  stamp_duty_rate: 0.001

  # 最低佣金（5元）
  min_commission: 5.0

  # 滑点（0.1%）
  slippage: 0.001

# 风险控制
risk_control:
  # 单只股票最大仓位比例
  max_single_position_ratio: 1.0  # 单只股票最大100%仓位

  # 最大持仓数量
  max_positions: 10

  # 止损比例
  stop_loss_ratio: 0.05

  # 止盈比例
  take_profit_ratio: 0.15

# 绩效分析配置
performance:
  # 无风险利率
  risk_free_rate: 0.03

  # 年化交易日数
  trading_days_per_year: 252

# 输出配置
output:
  # 报告输出目录
  reports_path: "reports"

  # 是否创建带时间戳的子目录
  create_timestamp_dir: true

  # 导出选项
  export:
    trades: true           # 导出交易记录CSV
    portfolio_history: true # 导出持仓历史CSV
    detailed_positions: true # 导出详细持仓CSV
    metrics: true          # 导出绩效指标JSON
    config: true           # 保存配置文件到报告目录

  # 图表选项
  plots:
    equity_curve: true     # 绘制资金曲线
    returns_distribution: true # 绘制收益率分布
    drawdown: true         # 绘制回撤图

  # 图表保存格式
  chart_format: "png"
